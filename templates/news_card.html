{% load static %}
<div class="news-card-container" id="news-{{ article.id }}">
    <div class="news-card">
        <div class="card-front">
            {% if article.image_url %}
            <img src="{{ article.image_url }}" alt="{{ article.title }}" class="news-image" loading="lazy" decoding="async">
            {% else %}
            <img src="{% static 'Img/News_Default.png' %}" alt="Imagen no disponible" class="news-image" loading="lazy" decoding="async">
            {% endif %}
            <h3 class="news-title">{{ article.title }}</h3>
            {% if article.short_answer %}
            <div class="short-answer">{{ article.short_answer }}</div>
            {% endif %}
            <div class="news-meta">
                <span class="meta-info">{{ article.source.name }} - {{ article.published_date|date:"d/m/Y H:i" }}</span>
                {% if article.similarity_score %}
                    <span class="similarity-score">{{ article.similarity_score|floatformat:2 }}</span>
                {% endif %}
            </div>
        </div>
        <div class="card-back">
            <div class="news-description">
                {{ article.description|safe }}
            </div>
            <div class="news-links">
                <a href="{{ article.link }}" target="_blank" class="news-link icon-only source-link" title="Fuente" aria-label="Fuente">
                    <svg viewBox="0 0 24 24" class="news-icon" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M12.7076 18.3639L11.2933 19.7781C9.34072 21.7308 6.1749 21.7308 4.22228 19.7781C2.26966 17.8255 2.26966 14.6597 4.22228 12.7071L5.63649 11.2929M18.3644 12.7071L19.7786 11.2929C21.7312 9.34024 21.7312 6.17441 19.7786 4.22179C17.826 2.26917 14.6602 2.26917 12.7076 4.22179L11.2933 5.636M8.50045 15.4999L15.5005 8.49994" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </a>
                <button class="news-link icon-only save-btn {% if article.is_saved %}is-saved{% endif %}" data-id="{{ article.id }}" data-saved="{% if article.is_saved %}true{% else %}false{% endif %}" title="Guardar" aria-label="Guardar">
                    {% if article.is_saved %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="news-icon bookmark-icon bookmark-saved" viewBox="0 0 16 16" aria-hidden="true">
                        <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zm8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                    </svg>
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="news-icon bookmark-icon bookmark-default" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2z"/>
                    </svg>
                    {% endif %}
                </button>
                {% if user.is_staff %}
                <button class="news-link icon-only delete-btn" data-id="{{ article.id }}" title="Eliminar" aria-label="Eliminar">
                    <svg viewBox="0 0 24 24" class="news-icon" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M10 12V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M14 12V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M4 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div> 
